# Benchmark

Benchmarks have been conducted using the automated WaterLily benchmarking suite, [WaterLily-Benchmarks](https://github.com/WaterLily-jl/WaterLily-Benchmarks), which is also included in this repository as a git submodule. The `cpc` branch of WaterLily-Benchmarks is specifically designed to produce the plots shown in the manuscript. Use `git clone --recurse-submodule --remote-submodules https://github.com/WaterLily-jl/WaterLily.jl_CPC_2024` to clone this repository together with the WaterLily-Benchmarks git submodule.

To generate the benchmarks results available in [data](./data), the MareNostrum5 (MN5) and LUMI supercomputers have been used. This data is also available in [4TU.ResearchData](https://doi.org/10.4121/f5bf6c46-8fbd-42b8-afb6-5eb356eae2e2). The benchmark job files are [job_benchmark_mn5.sh](https://github.com/WaterLily-jl/WaterLily-Benchmarks/blob/cpc/job_benchmark_mn5.sh) and [job_benchmark_lumi.sh](https://github.com/WaterLily-jl/WaterLily-Benchmarks/blob/cpc/job_benchmark_lumi.sh), respectively, noting that the CPU and NVIDIA-GPU results are obtained in MN5, and the AMD-GPU results in LUMI. The following Manifest.toml files are also included: [Manifest-v1.4.0-benchmarks-mn5.toml](https://github.com/WaterLily-jl/WaterLily-Benchmarks/blob/cpc/Manifest-v1.4.0-benchmarks-mn5.toml) and [Manifest-v1.4.0-benchmarks-lumi.toml](https://github.com/WaterLily-jl/WaterLily-Benchmarks/blob/cpc/Manifest-v1.4.0-benchmarks-lumi.toml) (rename to Manifest.toml when using them). Details for all benchmarks can be found in the job scripts, and information on how to generally use WaterLily-Benchmarks can be found in its [README.md](https://github.com/WaterLily-jl/WaterLily-Benchmarks/blob/cpc/README.md) file.

From the benchmark data, [benchmark.sh](benchmark.sh) can be used to generate figures 1 and 2 in the manuscript.